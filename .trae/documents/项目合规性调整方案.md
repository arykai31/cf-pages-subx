# 项目合规性调整方案

## 1. 技术栈调整

### 1.1 React 版本降级
- **问题**：当前使用 React 19，设计文档要求 React 18
- **调整方案**：将 React 和 React DOM 版本从 19.2.0 降级到 18.2.0
- **实施步骤**：
  - 修改 package.json 中的依赖版本
  - 运行 `npm install` 更新依赖

## 2. 目录结构完善

### 2.1 补充缺失目录
- **问题**：缺少 domain 层，表现层和应用层缺少部分目录
- **调整方案**：
  - 创建 `src/domain` 目录及其子目录（entities、value-objects、repositories、services、events）
  - 完善 `src/presentation` 目录，添加 molecules、organisms、styles 和 hooks 子目录
  - 完善 `src/application` 目录，添加 hooks、stores 和 workflows 子目录
  - 完善 `shared` 目录，添加 types、constants 和 validation 子目录

## 3. 功能实现完善

### 3.1 登录页面优化
- **问题**：缺少注册功能
- **调整方案**：添加用户注册页面和相关逻辑

### 3.2 首页功能实现
- **问题**：显示的是示例数据，不是实际的订阅列表
- **调整方案**：
  - 创建订阅相关的领域实体和服务
  - 实现订阅列表的展示功能
  - 添加添加、编辑、删除订阅的功能
  - 实现订阅状态切换功能

### 3.3 设置页面功能实现
- **问题**：只是占位符，没有实际功能
- **调整方案**：
  - 实现农历显示开关
  - 实现推送配置开关
  - 实现推送渠道选择（微信、企业微信）
  - 实现推送时间配置

### 3.4 个人中心功能实现
- **问题**：只是占位符，没有实际功能
- **调整方案**：
  - 实现用户信息展示
  - 实现头像上传/修改功能
  - 实现手机号修改功能
  - 实现密码修改功能

### 3.5 导航栏完善
- **问题**：缺少首页、订阅等导航项
- **调整方案**：在 Header 组件中添加导航项

## 4. 性能和安全优化

### 4.1 密码安全
- **问题**：没有实现密码加密存储
- **调整方案**：实现前端密码哈希和后端加密存储

### 4.2 JWT 认证流程完善
- **问题**：JWT 认证流程不完整
- **调整方案**：完善 JWT 的生成、验证和刷新机制

### 4.3 路由守卫完善
- **问题**：路由守卫实现不完整
- **调整方案**：完善路由守卫，确保未登录用户无法访问受保护页面

### 4.4 错误处理和日志记录
- **问题**：缺少完善的错误处理和日志记录
- **调整方案**：添加全局错误处理和日志记录机制

## 5. 其他调整

### 5.1 Link 组件 Hover 效果实现
- **问题**：缺少设计文档中提到的 Link 组件 Hover 效果
- **调整方案**：实现 Link 组件的 Hover 效果

### 5.2 用户头像下拉菜单完善
- **问题**：用户头像下拉菜单功能不完整
- **调整方案**：完善用户头像下拉菜单功能

## 6. 验证方法

- **技术栈验证**：检查 package.json 中的依赖版本
- **目录结构验证**：使用 `ls` 命令检查目录结构
- **功能验证**：手动测试所有核心功能
- **性能验证**：使用浏览器开发者工具测试页面加载时间
- **安全验证**：检查密码存储和认证流程

## 7. 预期效果

- 项目技术栈符合设计文档要求
- 目录结构完整，符合分层架构设计
- 所有核心功能实现完毕
- 性能和安全符合设计文档要求
- 代码质量符合编码规范

通过以上调整，项目将完全符合设计文档的要求，实现预期的功能和性能目标。